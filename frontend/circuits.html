<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Circuits ‚Äì Hypercar Performance Simulator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="circuits.css">
    <link rel="stylesheet" href="circuits-rt.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&family=Orbitron:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">
    <script src="config.js"></script>
</head>
<body>
    <div class="background-grid"></div>
    <div class="background-gradient"></div>
    <div class="app-container">
        <header class="main-navigation">
            <nav class="primary-nav">
                <div class="logo-container">
                    <div class="logo-icon">‚ö°</div>
                    <div class="logo-text"><h1>HYPERCAR</h1><span>Performance Simulator v2.0</span></div>
                </div>
                <div class="nav-menu">
                    <a href="home.html" class="nav-link">HOME</a>
                    <a href="simulator.html" class="nav-link">SIMULATOR</a>
                    <a href="circuits.html" class="nav-link active">CIRCUITS</a>
                    <a href="about.html" class="nav-link">ABOUT</a>
                </div>
                <div class="status-indicator"><span class="status-dot"></span><span class="status-text">Live</span></div>
            </nav>
        </header>

        <main class="circuits-page">
            <div class="circuits-header">
                <h2>REAL-WORLD <span>CIRCUITS</span></h2>
                <p>Physics-accurate real-time lap simulation ‚Äî braking zones, sector times, full telemetry</p>
            </div>

            <aside class="circuits-sidebar">
                <!-- Track Selection -->
                <div class="panel-card">
                    <div class="panel-title">Track Selection</div>
                    <div class="track-grid">
                        <div class="track-card active" data-track="monaco">
                            <span class="track-flag">üá≤üá®</span>
                            <div class="track-info">
                                <div class="track-name">Circuit de Monaco</div>
                                <div class="track-meta">3.337 km ¬∑ 19 corners ¬∑ 1929‚ÄìPresent</div>
                            </div>
                            <span class="track-status-dot"></span>
                        </div>
                        <div class="track-card" data-track="spa">
                            <span class="track-flag">üáßüá™</span>
                            <div class="track-info">
                                <div class="track-name">Spa-Francorchamps</div>
                                <div class="track-meta">6.996 km ¬∑ 19 corners ¬∑ 1925‚ÄìPresent</div>
                            </div>
                            <span class="track-status-dot"></span>
                        </div>
                        <div class="track-card coming-soon">
                            <span class="track-flag">üáÆüáπ</span>
                            <div class="track-info"><div class="track-name">Autodromo di Monza</div><div class="track-meta">5.793 km ¬∑ 11 corners</div></div>
                            <span class="track-badge">SOON</span>
                        </div>
                    </div>
                </div>

                <!-- Car Selection -->
                <div class="panel-card">
                    <div class="panel-title">Hypercar</div>
                    <div class="car-select-wrap">
                        <select id="car-select"><option value="">Loading vehicles‚Ä¶</option></select>
                    </div>
                    <div id="car-preview" class="car-preview"></div>
                </div>

                <!-- Car Customization -->
                <div class="panel-card" id="customization-panel" style="display:none;">
                    <div class="panel-title">Car Setup</div>
                    <div class="custom-grid">
                        <div class="custom-row">
                            <label class="custom-label">Downforce</label>
                            <div class="custom-slider-wrap">
                                <input type="range" id="custom-downforce" min="0.7" max="1.5" step="0.05" value="1.0" class="custom-slider">
                                <span id="custom-downforce-val" class="custom-val">1.00√ó</span>
                            </div>
                        </div>
                        <div class="custom-row">
                            <label class="custom-label">Tire Compound</label>
                            <div class="tire-buttons">
                                <button class="tire-btn" data-tire="soft" title="Soft ‚Äì Max grip, fast wear">S</button>
                                <button class="tire-btn active" data-tire="medium" title="Medium ‚Äì Balanced">M</button>
                                <button class="tire-btn" data-tire="hard" title="Hard ‚Äì Less grip, durable">H</button>
                                <button class="tire-btn wet-tire" data-tire="wet" title="Wet compound">W</button>
                            </div>
                        </div>
                        <div class="custom-row">
                            <label class="custom-label">Brake Bias</label>
                            <div class="custom-slider-wrap">
                                <input type="range" id="custom-brake-bias" min="0.52" max="0.68" step="0.01" value="0.60" class="custom-slider">
                                <span id="custom-brake-bias-val" class="custom-val">60% F</span>
                            </div>
                        </div>
                        <div class="custom-row">
                            <label class="custom-label">Fuel Load</label>
                            <div class="custom-slider-wrap">
                                <input type="range" id="custom-fuel" min="20" max="100" step="5" value="60" class="custom-slider">
                                <span id="custom-fuel-val" class="custom-val">60 L</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Weather -->
                <div class="panel-card">
                    <div class="panel-title">Weather &amp; Conditions</div>
                    <div class="weather-grid">
                        <button class="weather-btn active" data-weather="dry"><span class="wx-icon">‚òÄÔ∏è</span><span>Dry</span></button>
                        <button class="weather-btn" data-weather="damp"><span class="wx-icon">üå¶Ô∏è</span><span>Damp</span></button>
                        <button class="weather-btn" data-weather="wet"><span class="wx-icon">üåßÔ∏è</span><span>Wet</span></button>
                        <button class="weather-btn" data-weather="storm"><span class="wx-icon">‚õàÔ∏è</span><span>Storm</span></button>
                    </div>
                    <div class="weather-info" id="weather-info">Track: Dry ¬∑ Grip: 100% ¬∑ Visibility: Clear</div>
                    <div class="custom-row" style="margin-top:10px;">
                        <label class="custom-label">Temperature</label>
                        <div class="custom-slider-wrap">
                            <input type="range" id="custom-temp" min="5" max="45" step="1" value="22" class="custom-slider">
                            <span id="custom-temp-val" class="custom-val">22¬∞C</span>
                        </div>
                    </div>
                </div>

                <!-- Simulation Controls -->
                <div class="panel-card">
                    <div class="panel-title">Simulation</div>
                    <div class="sim-controls">
                        <div class="custom-row">
                            <label class="custom-label">Laps</label>
                            <div class="lap-counter">
                                <button class="lap-btn" id="lap-minus">‚àí</button>
                                <span id="lap-count-display" class="lap-num">1</span>
                                <button class="lap-btn" id="lap-plus">+</button>
                            </div>
                        </div>
                        <div class="custom-row" style="margin-top:10px;">
                            <label class="custom-label">Sim Speed</label>
                            <div class="speed-buttons">
                                <button class="speed-btn active" data-speed="1">1√ó</button>
                                <button class="speed-btn" data-speed="2">2√ó</button>
                                <button class="speed-btn" data-speed="5">5√ó</button>
                                <button class="speed-btn" data-speed="10">10√ó</button>
                            </div>
                        </div>
                    </div>
                    <div class="simulate-btn-wrap" style="margin-top:16px;">
                        <button id="simulate-btn"><span class="btn-icon">‚öë</span> <span id="btn-label">SIMULATE</span></button>
                        <button id="stop-btn" style="display:none;"><span class="btn-icon">‚ñ†</span> STOP</button>
                    </div>
                    <div id="sim-error"></div>
                </div>
            </aside>

            <!-- MAIN CONTENT -->
            <div class="circuits-main">
                <!-- MAP -->
                <div class="panel-card map-panel" style="padding:0;height:520px;position:relative;">
                    <div id="map-loading">
                        <div class="map-loading-spinner"></div>
                        <div class="map-loading-text">LOADING CIRCUIT DATA</div>
                    </div>
                    <div id="turn-info-bar"></div>
                    <div class="circuit-info-badge">
                        <div class="cib-row">Length <span class="cib-val">3.337 km</span></div>
                        <div class="cib-row">Corners <span class="cib-val">19</span></div>
                        <div class="cib-row">Record <span class="cib-val">1:10.166</span></div>
                    </div>
                    <!-- Live HUD -->
                    <div id="live-hud" class="live-hud" style="display:none;">
                        <div class="hud-row">
                            <div class="hud-block">
                                <div class="hud-label">SPEED</div>
                                <div class="hud-value" id="hud-speed">0</div>
                                <div class="hud-unit">km/h</div>
                            </div>
                            <div class="hud-block">
                                <div class="hud-label">LAP</div>
                                <div class="hud-value" id="hud-lap">1/1</div>
                                <div class="hud-unit">‚Äî</div>
                            </div>
                            <div class="hud-block">
                                <div class="hud-label">TIME</div>
                                <div class="hud-value" id="hud-time">0:00.000</div>
                                <div class="hud-unit">‚Äî</div>
                            </div>
                            <div class="hud-block">
                                <div class="hud-label">GEAR</div>
                                <div class="hud-value" id="hud-gear">N</div>
                                <div class="hud-unit">‚Äî</div>
                            </div>
                            <div class="hud-block">
                                <div class="hud-label">G-FORCE</div>
                                <div class="hud-value" id="hud-gforce">0.0</div>
                                <div class="hud-unit">g</div>
                            </div>
                        </div>
                        <div class="hud-bar-row">
                            <div class="hud-bar-label">THR</div>
                            <div class="hud-bar-track"><div class="hud-bar throttle-bar" id="hud-throttle-bar"></div></div>
                            <div class="hud-bar-label">BRK</div>
                            <div class="hud-bar-track"><div class="hud-bar brake-bar" id="hud-brake-bar"></div></div>
                        </div>
                    </div>
                    <div id="circuit-map" style="width:100%;height:100%;border-radius:12px;"></div>
                </div>

                <!-- Lap summary strip -->
                <div id="lap-summary-strip" class="lap-summary-strip" style="display:none;"></div>

                <!-- RESULT PANEL -->
                <div id="result-panel" class="panel-card" style="display:none;">
                    <div class="result-header">
                        <span id="res-car-name" class="result-car-name">‚Äî</span>
                        <span class="result-track-tag">Circuit de Monaco</span>
                        <span id="res-weather-tag" class="result-weather-tag">Dry</span>
                    </div>
                    <div class="result-metrics">
                        <div class="metric-card primary">
                            <div class="metric-label">Best Lap Time</div>
                            <div id="res-laptime" class="metric-value">‚Äî</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Avg Speed</div>
                            <div id="res-avgspeed" class="metric-value">‚Äî</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Top Speed</div>
                            <div id="res-topspeed" class="metric-value">‚Äî</div>
                        </div>
                    </div>
                    <div id="sector-times" class="sector-times-row"></div>

                    <div id="lap-times-section" class="lap-times-section" style="display:none;">
                        <div class="panel-title" style="margin:20px 0 10px;">All Lap Times</div>
                        <div class="bz-table-wrap">
                            <table class="bz-table">
                                <thead><tr><th>Lap</th><th>Time</th><th>S1</th><th>S2</th><th>S3</th><th>vs Best</th></tr></thead>
                                <tbody id="lap-times-body"></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="panel-title" style="margin:20px 0 10px;">Speed Telemetry</div>
                    <div class="telemetry-wrap">
                        <canvas id="telemetry-chart"></canvas>
                    </div>
                    <div class="telemetry-legend">
                        <div class="legend-item"><div class="legend-dot" style="background:#00FF9D"></div>Acceleration</div>
                        <div class="legend-item"><div class="legend-dot" style="background:#FF8C00"></div>Corner Apex</div>
                        <div class="legend-item"><div class="legend-dot" style="background:#FF0066"></div>Braking</div>
                    </div>

                    <div id="brake-zone-section" class="brake-zone-section">
                        <div class="panel-title" style="margin:24px 0 14px;">Braking Zone Analysis</div>
                        <div class="bz-table-wrap">
                            <table class="bz-table">
                                <thead>
                                    <tr>
                                        <th>Corner</th>
                                        <th>Entry</th>
                                        <th>Apex</th>
                                        <th>‚àíSpeed</th>
                                        <th>Brake Dist</th>
                                        <th>Brake Time</th>
                                        <th>Peak g</th>
                                    </tr>
                                </thead>
                                <tbody id="brake-zone-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="main-footer" style="margin-top:40px;">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo"><span class="logo-icon">‚ö°</span><span class="logo-text">HYPERCAR</span></div>
                    <p class="footer-tagline">Ultimate Performance Simulator v2.0</p>
                </div>
                <div class="footer-section">
                    <h4 class="footer-heading">NAVIGATION</h4>
                    <a href="home.html" class="footer-link">Home</a>
                    <a href="simulator.html" class="footer-link">Simulator</a>
                    <a href="circuits.html" class="footer-link">Circuits</a>
                    <a href="about.html" class="footer-link">About</a>
                </div>
                <div class="footer-section">
                    <h4 class="footer-heading">CIRCUITS</h4>
                    <div class="footer-text">Monaco</div>
                    <div class="footer-text">Spa-Francorchamps</div>
                    <div class="footer-text">Monza (Soon)</div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Hypercar Simulator v2.0 | Real-World Circuit Simulation</p>
            </div>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <script type="module" src="circuits-rt.js"></script>
</body>
</html>
